{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Button,Row,Col,ListGroup,Image,Card}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import CheckoutSteps from'../components/CheckoutSteps';import{useDispatch,useSelector}from'react-redux';import Message from'../components/Message';import{Link}from'react-router-dom';import{createOrder}from'../actions/orderActions';import{ORDER_CREATE_RESET}from'../constants/orderConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PlaceOrderScreen(_ref){var history=_ref.history;var orderCreate=useSelector(function(state){return state.orderCreate;});var order=orderCreate.order,error=orderCreate.error,success=orderCreate.success;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});cart.itemsPrice=cart.cartItems.reduce(function(acc,item){return acc+item.price*item.qty;},0).toFixed(2);cart.shippingPrice=(cart.shippingAddress.country===\"Dhaka\"?80:120).toFixed(2);cart.taxPrice=Number((0.082*cart.itemsPrice).toFixed(2));cart.totalPrice=Number(cart.itemsPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice);if(!cart.paymentMethod){history.push('/payment');}useEffect(function(){if(success){history.push(\"/order/\".concat(order._id));dispatch({type:ORDER_CREATE_RESET});}},[success,history]);var placeOrder=function placeOrder(){dispatch(createOrder({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,className:\"text-left\",children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Shipping\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Shipping: \"}),cart.shippingAddress.address,\", \",cart.shippingAddress.city,'  ',cart.shippingAddress.postalCode,\",\",'  ',cart.shippingAddress.country]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Method: \"}),cart.paymentMethod]})]}),/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Order Items\"}),cart.cartItems.length===0?/*#__PURE__*/_jsx(Message,{variant:\"info\",children:\"Your cart is empty\"}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cart.cartItems.map(function(item,index){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:1,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:4,children:[item.qty,\" X $\",item.price,\" = $\",(item.qty*item.price).toFixed(2)]})]})},index);})})]})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Order Summary\"})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Items:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.itemsPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Shipping:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.shippingPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Tax:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.taxPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:\"Total:\"}),/*#__PURE__*/_jsxs(Col,{children:[\"$\",cart.totalPrice]})]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:error&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cart.cartItems===0,onClick:placeOrder,children:\"Place Order\"})})]})})})]})]});}export default PlaceOrderScreen;","map":{"version":3,"names":["React","useEffect","useState","Button","Row","Col","ListGroup","Image","Card","LinkContainer","CheckoutSteps","useDispatch","useSelector","Message","Link","createOrder","ORDER_CREATE_RESET","PlaceOrderScreen","history","orderCreate","state","order","error","success","dispatch","cart","itemsPrice","cartItems","reduce","acc","item","price","qty","toFixed","shippingPrice","shippingAddress","country","taxPrice","Number","totalPrice","paymentMethod","push","_id","type","placeOrder","orderItems","address","city","postalCode","length","map","index","image","name","product"],"sources":["C:/Users/mahad/Desktop/React-Django-Ecommerce/frontend/src/screen/PlaceOrderScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { Button, Row, Col, ListGroup, Image, Card } from 'react-bootstrap'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport CheckoutSteps from '../components/CheckoutSteps'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../components/Message'\r\nimport { Link } from 'react-router-dom'\r\nimport { createOrder } from '../actions/orderActions'\r\nimport { ORDER_CREATE_RESET } from '../constants/orderConstants'\r\n\r\n\r\nfunction PlaceOrderScreen({ history }) {\r\n\r\n    const orderCreate = useSelector(state => state.orderCreate)\r\n    const {order, error, success} = orderCreate\r\n    const dispatch = useDispatch()\r\n\r\n    const cart = useSelector(state => state.cart)\r\n\r\n\r\n    cart.itemsPrice = cart.cartItems.reduce((acc, item) => acc + item.price * item.qty, 0).toFixed(2)\r\n    cart.shippingPrice = (cart.shippingAddress.country===\"Dhaka\" ? 80 : 120).toFixed(2)\r\n    cart.taxPrice = Number(((0.082) * cart.itemsPrice).toFixed(2))\r\n    cart.totalPrice = Number(cart.itemsPrice) + Number(cart.shippingPrice) + Number(cart.taxPrice)\r\n\r\n    if(!cart.paymentMethod){\r\n        history.push('/payment')\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(success){\r\n            history.push(`/order/${order._id}`)\r\n            dispatch({\r\n                type:ORDER_CREATE_RESET\r\n            })\r\n            \r\n        }\r\n    }, [success, history])\r\n\r\n    const placeOrder = () => {\r\n        dispatch(createOrder({\r\n            orderItems:cart.cartItems,\r\n            shippingAddress:cart.shippingAddress,\r\n            paymentMethod:cart.paymentMethod,\r\n            itemsPrice:cart.itemsPrice,\r\n            shippingPrice:cart.shippingPrice,\r\n            taxPrice:cart.taxPrice,\r\n            totalPrice:cart.totalPrice,\r\n        }))\r\n    }\r\n    return (\r\n        <div>\r\n            <CheckoutSteps step1 step2 step3 step4/>\r\n            <Row>\r\n                <Col md={8} className='text-left'>\r\n                    <ListGroup variant='flush'>\r\n                        <ListGroup.Item>\r\n                            <h2>Shipping</h2>\r\n\r\n                            <p>\r\n                                <strong>Shipping: </strong>\r\n                                {cart.shippingAddress.address}, {cart.shippingAddress.city}\r\n                                {'  '}\r\n                                {cart.shippingAddress.postalCode},\r\n                                {'  '}\r\n                                {cart.shippingAddress.country}\r\n                            </p>\r\n                        </ListGroup.Item>\r\n\r\n                        <ListGroup.Item>\r\n                            <h2>Payment Method</h2>\r\n\r\n                            <p>\r\n                                <strong>Method: </strong>\r\n                                {cart.paymentMethod}\r\n                            </p>\r\n                        </ListGroup.Item>\r\n\r\n                        <ListGroup.Item>\r\n                            <h2>Order Items</h2>\r\n                            {cart.cartItems.length === 0 ? <Message variant='info'>\r\n                                Your cart is empty\r\n                                </Message> : (\r\n                                    <ListGroup variant='flush'>\r\n                                        {cart.cartItems.map((item, index)=> (\r\n                                            <ListGroup.Item key={index}>\r\n                                                <Row>\r\n                                                    <Col md={1}>\r\n                                                    <Image src={item.image} alt={item.name} fluid rounded/>\r\n                                                    </Col>\r\n\r\n                                                    <Col>\r\n                                                        <Link to={`/product/${item.product}`}>{item.name}</Link>\r\n                                                    </Col>\r\n\r\n                                                    <Col md={4}>\r\n                                                        {item.qty} X ${item.price} = ${(item.qty * item.price).toFixed(2)}\r\n                                                    </Col>\r\n                                                </Row>\r\n                                            </ListGroup.Item>\r\n                                        ))}\r\n                                    </ListGroup>\r\n                                )}\r\n                            \r\n                        </ListGroup.Item>\r\n                    </ListGroup>\r\n                </Col>\r\n\r\n                <Col md={4}>\r\n                    <Card>\r\n                        <ListGroup variant='flush'>\r\n                                <ListGroup.Item>\r\n                                    <h2>Order Summary</h2>\r\n                                </ListGroup.Item>\r\n\r\n                                <ListGroup.Item>\r\n                                    <Row>\r\n                                        <Col>Items:</Col>\r\n                                        <Col>${cart.itemsPrice}</Col>\r\n                                    </Row>\r\n                                </ListGroup.Item>\r\n\r\n                                <ListGroup.Item>\r\n                                    <Row>\r\n                                        <Col>Shipping:</Col>\r\n                                        <Col>${cart.shippingPrice}</Col>\r\n                                    </Row>\r\n                                </ListGroup.Item>\r\n\r\n                                <ListGroup.Item>\r\n                                    <Row>\r\n                                        <Col>Tax:</Col>\r\n                                        <Col>${cart.taxPrice}</Col>\r\n                                    </Row>\r\n                                </ListGroup.Item>\r\n\r\n                                <ListGroup.Item>\r\n                                    <Row>\r\n                                        <Col>Total:</Col>\r\n                                        <Col>${cart.totalPrice}</Col>\r\n                                    </Row>\r\n                                </ListGroup.Item>\r\n\r\n                                <ListGroup.Item>\r\n                                    {error && <Message variant='danger'>{error}</Message>}\r\n                                </ListGroup.Item>\r\n\r\n                                <ListGroup.Item>\r\n                                    <Button\r\n                                        type='button'\r\n                                        className='btn-block'\r\n                                        disabled={cart.cartItems === 0}\r\n                                        onClick={placeOrder}\r\n                                    >\r\n                                        Place Order\r\n                                    </Button>\r\n                                </ListGroup.Item>\r\n                        </ListGroup>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PlaceOrderScreen\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}